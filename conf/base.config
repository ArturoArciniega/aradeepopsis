/* -------------------------------------------------
 * Nextflow config file for aradeepopsis
 * -------------------------------------------------
 */

env {
  PYTHONPATH = "${PYTHONPATH}:$baseDir/bin"
}

process {
  container = 'docker.artifactory.imp.ac.at/becker/aradeepopsis:dev'
  
  errorStrategy = { task.exitStatus in [143,137,104,134,135,139] ? 'retry' : 'finish' }
  maxRetries = 3

  withName: build_records {
  	cpus = { 1 * task.attempt }
  	memory = { 1.GB * task.attempt }
  	time = { 1.h * task.attempt }
  }
  withName: run_predictions {
  	cpus = { 4 * task.attempt }
  	memory = { 16.GB * task.attempt }
  	time = { 4.h * task.attempt }
  }
  withName: draw_diagnostics {
        cpus = { 1 * task.attempt }
        memory = { 2.GB * task.attempt }
        time = { 1.h * task.attempt }
  }
}
